{"ast":null,"code":"var _jsxFileName = \"/Users/tanyabansal/Desktop/WebD_Final/Web-Design-Group-Project-Main/react-app/src/components/Auth/Auth.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Form, Button, Container, Row, Col, Alert, Spinner } from 'react-bootstrap';\nimport { useNavigate } from 'react-router-dom';\nimport './Auth.css';\nimport backgroundImage from '../../images/signUp_background.jpg';\nimport logoImage from '../../images/logo.png';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Auth = () => {\n  _s();\n  const [isSignUp, setIsSignUp] = useState(false);\n  const [formData, setFormData] = useState({\n    email: '',\n    password: ''\n  });\n  const [errors, setErrors] = useState({});\n  const [apiError, setApiError] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const navigate = useNavigate();\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const validateForm = () => {\n    const newErrors = {};\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$/;\n    if (!emailRegex.test(formData.email)) {\n      newErrors.email = 'Invalid email format';\n    }\n    if (!passwordRegex.test(formData.password)) {\n      newErrors.password = 'Password must include uppercase, number, and special character';\n    }\n    if (isSignUp) {\n      if (!formData.firstName) {\n        newErrors.firstName = 'First name is required';\n      }\n      if (!formData.lastName) {\n        newErrors.lastName = 'Last name is required';\n      }\n      if (!formData.securityAnswer) {\n        newErrors.securityAnswer = 'Security answer is required';\n      }\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setApiError('');\n    setIsLoading(true);\n    if (!validateForm()) {\n      setIsLoading(false);\n      return;\n    }\n    try {\n      const API_URL = 'http://localhost:5001/api';\n      const endpoint = isSignUp ? '/users/register' : '/users/login';\n      let requestData;\n      if (isSignUp) {\n        requestData = {\n          name: `${formData.firstName} ${formData.lastName}`,\n          email: formData.email,\n          password: formData.password,\n          securityQuestion: \"What was your first pet's name?\",\n          securityAnswer: formData.securityAnswer,\n          role: \"customer\"\n        };\n      } else {\n        requestData = {\n          email: formData.email,\n          password: formData.password\n        };\n      }\n      console.log('Attempting to connect to:', `${API_URL}${endpoint}`);\n      console.log('Request data:', requestData);\n      const response = await fetch(`${API_URL}${endpoint}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify(requestData)\n      });\n      console.log('Response status:', response.status);\n      let data;\n      try {\n        data = await response.json();\n        console.log('Response data:', data);\n      } catch (jsonError) {\n        console.error('Error parsing JSON response:', jsonError);\n        throw new Error('Invalid response from server');\n      }\n      if (!response.ok) {\n        throw new Error(data.message || `Server error: ${response.status}`);\n      }\n      if (!data.token || !data.user) {\n        throw new Error('Invalid response format: missing token or user data');\n      }\n\n      // Store token and user data\n      localStorage.setItem('token', data.token);\n      localStorage.setItem('user', JSON.stringify(data.user));\n      console.log('Authentication successful');\n      console.log('User role:', data.user.role);\n      console.log('Stored token:', data.token.substring(0, 10) + '...');\n\n      // Role-based redirection\n      switch (data.user.role) {\n        case 'customer':\n          console.log('Redirecting to homepage');\n          navigate('/homepage');\n          break;\n        case 'artist':\n          console.log('Redirecting to artist dashboard');\n          navigate('/artists/dashboard');\n          break;\n        case 'admin':\n          console.log('Redirecting to admin table');\n          navigate('/admin/table');\n          break;\n        default:\n          console.log('No matching role, redirecting to home');\n          navigate('/');\n      }\n    } catch (err) {\n      console.error('Authentication error:', err);\n      if (err instanceof Error) {\n        if (err.message.includes('Failed to fetch')) {\n          setApiError('Unable to connect to the server. Please make sure the backend server is running on port 5001.');\n        } else if (err.message.includes('Invalid response format')) {\n          setApiError('Server returned an invalid response. Please try again later.');\n        } else {\n          setApiError(err.message);\n        }\n      } else {\n        setApiError('An unexpected error occurred during authentication');\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    fluid: true,\n    className: \"auth-container\",\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        md: 5,\n        className: \"image-section\",\n        style: {\n          '--background-image': `url(${backgroundImage})`\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"logo-container\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: logoImage,\n            alt: \"logo\",\n            className: \"logo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: 7,\n        className: \"form-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: isSignUp ? 'Sign Up' : 'Sign In'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }, this), apiError && /*#__PURE__*/_jsxDEV(Alert, {\n          variant: \"danger\",\n          children: apiError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 24\n        }, this), /*#__PURE__*/_jsxDEV(Form, {\n          onSubmit: handleSubmit,\n          className: \"auth-form\",\n          children: [isSignUp && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n                type: \"text\",\n                name: \"firstName\",\n                placeholder: \"First Name\",\n                value: formData.firstName,\n                onChange: handleInputChange,\n                isInvalid: !!errors.firstName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n                type: \"invalid\",\n                children: errors.firstName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n                type: \"text\",\n                name: \"lastName\",\n                placeholder: \"Last Name\",\n                value: formData.lastName,\n                onChange: handleInputChange,\n                isInvalid: !!errors.lastName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n                type: \"invalid\",\n                children: errors.lastName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true), /*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"email\",\n              name: \"email\",\n              placeholder: \"Email\",\n              value: formData.email,\n              onChange: handleInputChange,\n              isInvalid: !!errors.email,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n              type: \"invalid\",\n              children: errors.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"password\",\n              name: \"password\",\n              placeholder: \"Password\",\n              value: formData.password,\n              onChange: handleInputChange,\n              isInvalid: !!errors.password,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n              type: \"invalid\",\n              children: errors.password\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 13\n          }, this), isSignUp && /*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Security Question\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-muted mb-2\",\n              children: \"What was your first pet's name?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              name: \"securityAnswer\",\n              placeholder: \"Enter your answer\",\n              value: formData.securityAnswer,\n              onChange: handleInputChange,\n              isInvalid: !!errors.securityAnswer,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n              type: \"invalid\",\n              children: errors.securityAnswer\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"dark\",\n            type: \"submit\",\n            className: \"w-100 mb-3\",\n            disabled: isLoading,\n            children: isLoading ? /*#__PURE__*/_jsxDEV(Spinner, {\n              as: \"span\",\n              animation: \"border\",\n              size: \"sm\",\n              role: \"status\",\n              \"aria-hidden\": \"true\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 17\n            }, this) : isSignUp ? 'Register' : 'Login'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-center\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"link\",\n              onClick: () => setIsSignUp(!isSignUp),\n              className: \"toggle-link\",\n              children: isSignUp ? 'Already have an account? Sign In' : \"Don't have an account? Sign Up\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 173,\n    columnNumber: 5\n  }, this);\n};\n_s(Auth, \"ewOmNiSXvv2Dv0gOcxv9yKEx6+I=\", false, function () {\n  return [useNavigate];\n});\n_c = Auth;\nexport default Auth;\nvar _c;\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"names":["React","useState","Form","Button","Container","Row","Col","Alert","Spinner","useNavigate","backgroundImage","logoImage","jsxDEV","_jsxDEV","Fragment","_Fragment","Auth","_s","isSignUp","setIsSignUp","formData","setFormData","email","password","errors","setErrors","apiError","setApiError","isLoading","setIsLoading","navigate","handleInputChange","e","name","value","target","prev","validateForm","newErrors","emailRegex","passwordRegex","test","firstName","lastName","securityAnswer","Object","keys","length","handleSubmit","preventDefault","API_URL","endpoint","requestData","securityQuestion","role","console","log","response","fetch","method","headers","body","JSON","stringify","status","data","json","jsonError","error","Error","ok","message","token","user","localStorage","setItem","substring","err","includes","fluid","className","children","md","style","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","variant","onSubmit","Group","Control","type","placeholder","onChange","isInvalid","Feedback","required","Label","disabled","as","animation","size","onClick","_c","$RefreshReg$"],"sources":["/Users/tanyabansal/Desktop/WebD_Final/Web-Design-Group-Project-Main/react-app/src/components/Auth/Auth.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Form, Button, Container, Row, Col, Alert, Spinner } from 'react-bootstrap';\nimport { useNavigate } from 'react-router-dom';\nimport './Auth.css';\nimport backgroundImage from '../../images/signUp_background.jpg';\nimport logoImage from '../../images/logo.png';\n\ninterface UserData {\n  firstName?: string;\n  lastName?: string;\n  email: string;\n  password: string;\n  securityQuestion?: string;\n  securityAnswer?: string;\n  role?: string;\n}\n\nconst Auth: React.FC = () => {\n  const [isSignUp, setIsSignUp] = useState(false);\n  const [formData, setFormData] = useState<UserData>({\n    email: '',\n    password: '',\n  });\n  const [errors, setErrors] = useState<{ [key: string]: string }>({});\n  const [apiError, setApiError] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const navigate = useNavigate();\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const validateForm = () => {\n    const newErrors: { [key: string]: string } = {};\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$/;\n\n    if (!emailRegex.test(formData.email)) {\n      newErrors.email = 'Invalid email format';\n    }\n\n    if (!passwordRegex.test(formData.password)) {\n      newErrors.password = 'Password must include uppercase, number, and special character';\n    }\n\n    if (isSignUp) {\n      if (!formData.firstName) {\n        newErrors.firstName = 'First name is required';\n      }\n      if (!formData.lastName) {\n        newErrors.lastName = 'Last name is required';\n      }\n      if (!formData.securityAnswer) {\n        newErrors.securityAnswer = 'Security answer is required';\n      }\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setApiError('');\n    setIsLoading(true);\n\n    if (!validateForm()) {\n      setIsLoading(false);\n      return;\n    }\n\n    try {\n      const API_URL = 'http://localhost:5001/api';\n      const endpoint = isSignUp ? '/users/register' : '/users/login';\n      \n      let requestData;\n      if (isSignUp) {\n        requestData = {\n          name: `${formData.firstName} ${formData.lastName}`,\n          email: formData.email,\n          password: formData.password,\n          securityQuestion: \"What was your first pet's name?\",\n          securityAnswer: formData.securityAnswer,\n          role: \"customer\"\n        };\n      } else {\n        requestData = {\n          email: formData.email,\n          password: formData.password\n        };\n      }\n\n      console.log('Attempting to connect to:', `${API_URL}${endpoint}`);\n      console.log('Request data:', requestData);\n\n      const response = await fetch(`${API_URL}${endpoint}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify(requestData),\n      });\n\n      console.log('Response status:', response.status);\n      \n      let data;\n      try {\n        data = await response.json();\n        console.log('Response data:', data);\n      } catch (jsonError) {\n        console.error('Error parsing JSON response:', jsonError);\n        throw new Error('Invalid response from server');\n      }\n\n      if (!response.ok) {\n        throw new Error(data.message || `Server error: ${response.status}`);\n      }\n\n      if (!data.token || !data.user) {\n        throw new Error('Invalid response format: missing token or user data');\n      }\n\n      // Store token and user data\n      localStorage.setItem('token', data.token);\n      localStorage.setItem('user', JSON.stringify(data.user));\n\n      console.log('Authentication successful');\n      console.log('User role:', data.user.role);\n      console.log('Stored token:', data.token.substring(0, 10) + '...');\n\n      // Role-based redirection\n      switch (data.user.role) {\n        case 'customer':\n          console.log('Redirecting to homepage');\n          navigate('/homepage');\n          break;\n        case 'artist':\n          console.log('Redirecting to artist dashboard');\n          navigate('/artists/dashboard');\n          break;\n        case 'admin':\n          console.log('Redirecting to admin table');\n          navigate('/admin/table');\n          break;\n        default:\n          console.log('No matching role, redirecting to home');\n          navigate('/');\n      }\n    } catch (err) {\n      console.error('Authentication error:', err);\n      if (err instanceof Error) {\n        if (err.message.includes('Failed to fetch')) {\n          setApiError('Unable to connect to the server. Please make sure the backend server is running on port 5001.');\n        } else if (err.message.includes('Invalid response format')) {\n          setApiError('Server returned an invalid response. Please try again later.');\n        } else {\n          setApiError(err.message);\n        }\n      } else {\n        setApiError('An unexpected error occurred during authentication');\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Container fluid className=\"auth-container\">\n      <Row>\n        <Col md={5} className=\"image-section\" style={{ '--background-image': `url(${backgroundImage})` } as React.CSSProperties}>\n          <div className=\"logo-container\">\n            <img src={logoImage} alt=\"logo\" className=\"logo\" />\n          </div>\n        </Col>\n        <Col md={7} className=\"form-section\">\n          <h2>{isSignUp ? 'Sign Up' : 'Sign In'}</h2>\n          {apiError && <Alert variant=\"danger\">{apiError}</Alert>}\n          <Form onSubmit={handleSubmit} className=\"auth-form\">\n            {isSignUp && (\n              <>\n                <Form.Group className=\"mb-3\">\n                  <Form.Control\n                    type=\"text\"\n                    name=\"firstName\"\n                    placeholder=\"First Name\"\n                    value={formData.firstName}\n                    onChange={handleInputChange}\n                    isInvalid={!!errors.firstName}\n                  />\n                  <Form.Control.Feedback type=\"invalid\">\n                    {errors.firstName}\n                  </Form.Control.Feedback>\n                </Form.Group>\n                <Form.Group className=\"mb-3\">\n                  <Form.Control\n                    type=\"text\"\n                    name=\"lastName\"\n                    placeholder=\"Last Name\"\n                    value={formData.lastName}\n                    onChange={handleInputChange}\n                    isInvalid={!!errors.lastName}\n                  />\n                  <Form.Control.Feedback type=\"invalid\">\n                    {errors.lastName}\n                  </Form.Control.Feedback>\n                </Form.Group>\n              </>\n            )}\n\n            <Form.Group className=\"mb-3\">\n              <Form.Control\n                type=\"email\"\n                name=\"email\"\n                placeholder=\"Email\"\n                value={formData.email}\n                onChange={handleInputChange}\n                isInvalid={!!errors.email}\n                required\n              />\n              <Form.Control.Feedback type=\"invalid\">\n                {errors.email}\n              </Form.Control.Feedback>\n            </Form.Group>\n\n            <Form.Group className=\"mb-3\">\n              <Form.Control\n                type=\"password\"\n                name=\"password\"\n                placeholder=\"Password\"\n                value={formData.password}\n                onChange={handleInputChange}\n                isInvalid={!!errors.password}\n                required\n              />\n              <Form.Control.Feedback type=\"invalid\">\n                {errors.password}\n              </Form.Control.Feedback>\n            </Form.Group>\n\n            {isSignUp && (\n              <Form.Group className=\"mb-3\">\n                <Form.Label>Security Question</Form.Label>\n                <p className=\"text-muted mb-2\">What was your first pet's name?</p>\n                <Form.Control\n                  type=\"text\"\n                  name=\"securityAnswer\"\n                  placeholder=\"Enter your answer\"\n                  value={formData.securityAnswer}\n                  onChange={handleInputChange}\n                  isInvalid={!!errors.securityAnswer}\n                  required\n                />\n                <Form.Control.Feedback type=\"invalid\">\n                  {errors.securityAnswer}\n                </Form.Control.Feedback>\n              </Form.Group>\n            )}\n\n            <Button \n              variant=\"dark\" \n              type=\"submit\" \n              className=\"w-100 mb-3\"\n              disabled={isLoading}\n            >\n              {isLoading ? (\n                <Spinner\n                  as=\"span\"\n                  animation=\"border\"\n                  size=\"sm\"\n                  role=\"status\"\n                  aria-hidden=\"true\"\n                />\n              ) : (\n                isSignUp ? 'Register' : 'Login'\n              )}\n            </Button>\n\n            <p className=\"text-center\">\n              <Button\n                variant=\"link\"\n                onClick={() => setIsSignUp(!isSignUp)}\n                className=\"toggle-link\"\n              >\n                {isSignUp\n                  ? 'Already have an account? Sign In'\n                  : \"Don't have an account? Sign Up\"}\n              </Button>\n            </p>\n          </Form>\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n\nexport default Auth; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}